(this.webpackJsonpdartscore=this.webpackJsonpdartscore||[]).push([[0],{62:function(e,n,t){},85:function(e,n,t){},86:function(e,n,t){"use strict";t.r(n);var c=t(1),r=t(0),a=t.n(r),i=t(24),o=t.n(i),u=(t(62),t(21)),s=t(7),l=t(4),j=t(5);function d(){var e=Object(l.a)(["\n    color: #30e06b;\n    font-size: 1em;\n    margin: 1em;\n    padding: 0.25em 1em;\n    border: 2px solid #30e06b;\n    border-radius: 3px;\n"]);return d=function(){return e},e}function b(){var e=Object(l.a)(["\n    color: #4fa1ee;\n    font-size: 1em;\n    margin: 1em;\n    padding: 0.25em 1em;\n    border: 2px solid#4fa1ee;\n    border-radius: 3px;\n"]);return b=function(){return e},e}var f=j.a.button(b()),O=j.a.button(d());function h(){var e=Object(l.a)(["\n    text-align: center;\n    background-color: #aac4f7;\n    min-height: 100vh;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    font-size: calc(10px + 2vmin);\n    color: #030303;\n"]);return h=function(){return e},e}function p(){var e=Object(l.a)(["\n    text-align: center;\n    background-color: #282c34;\n    min-height: 100vh;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    font-size: calc(10px + 2vmin);\n    //font-family: 'PressStart2P';\n    font-family: source-code-pro;\n    color: white;\n"]);return p=function(){return e},e}function x(){var e=Object(l.a)(["\n    text-align: center;\n    background-color: #282c34;\n    min-height: 100vh;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    font-size: calc(10px + 2vmin);\n    color: white;\n"]);return x=function(){return e},e}var g=j.a.section(x()),m=j.a.section(p()),v=(j.a.section(h()),function(){var e=Object(s.f)(),n=function(n){e.push(n)};return Object(c.jsxs)(g,{children:[Object(c.jsx)("div",{children:Object(c.jsx)("h1",{children:"Dartscore"})}),Object(c.jsx)("div",{children:Object(c.jsx)(f,{onClick:function(){return n("/create")},children:"Create Game"})}),Object(c.jsx)("div",{children:Object(c.jsx)(O,{onClick:function(){return n("/join")},children:"Join Game"})})]})}),y=t(9);function S(){var e=Object(l.a)(["\n    font-size: 18px;\n    padding: 10px;\n    margin: 10px;\n    background: #b6b6b6;\n    border: none;\n    border-radius: 3px;\n    ::placeholder {\n        color: #666666;\n    }\n    text-transform: uppercase;\n"]);return S=function(){return e},e}function k(){var e=Object(l.a)(["\n    font-size: 18px;\n    padding: 10px;\n    margin: 10px;\n    background: #b6b6b6;\n    border: none;\n    border-radius: 3px;\n    ::placeholder {\n        color: #666666;\n    }\n    text-transform: uppercase;\n"]);return k=function(){return e},e}var w=j.a.input(k()),C=j.a.input(S()),N=t(20),I=t.n(N);I.a.defaults.headers.get["Content-Type"]="application/json";var T="https://iukxdiz252.execute-api.us-east-1.amazonaws.com/dev",P=function(e,n){var t="".concat(T,"/update");return I.a.post(t,{game_id:e,game_state:n}).then((function(e){return e.data})).catch((function(e){return Promise.reject(JSON.stringify(e))}))},J=function(e){var n="".concat(T,"/gamestate?game=").concat(e);return I.a.get(n).then((function(e){return e.data})).catch((function(e){return Promise.reject(JSON.stringify(e))}))},_=t(111),D=t(110),z=function(){var e=Object(s.f)(),n=Object(r.useState)(""),t=Object(y.a)(n,2),a=t[0],i=t[1],o=Object(r.useState)(""),u=Object(y.a)(o,2),l=u[0],j=u[1],d=Object(r.useState)("cricket"),b=Object(y.a)(d,2),f=b[0],h=b[1];Object(r.useEffect)((function(){l||function(){var e="".concat(T,"/generateid");return I.a.get(e).then((function(e){return e.data})).catch((function(e){return Promise.reject(JSON.stringify(e))}))}().then((function(e){var n=e.game_id;l||(j(n),console.log(n))}))}),[l]);var p=function(n){(function(e,n){var t="".concat(T,"/create");return I.a.post(t,{game_id:e,game_type:n}).then((function(e){return e.data})).catch((function(e){return Promise.reject(JSON.stringify(e))}))})(l,f).then((function(){e.push({pathname:n,state:{gameID:l,player:a}})}))};return Object(c.jsxs)(g,{children:[Object(c.jsx)("div",{children:Object(c.jsx)("h1",{children:"Dartscore"})}),Object(c.jsx)("div",{children:Object(c.jsxs)("h2",{children:["Game Code: ",l]})}),Object(c.jsx)("div",{children:Object(c.jsx)("label",{children:"Name"})}),Object(c.jsx)("div",{children:Object(c.jsx)(w,{placeholder:"Enter Your Name",onChange:function(e){return i(e.target.value.toUpperCase())}})}),Object(c.jsx)("div",{children:Object(c.jsxs)(_.a,{value:f,onChange:function(e,n){h(n)},exclusive:!0,children:[Object(c.jsx)(D.a,{value:"cricket",children:"Cricket"}),Object(c.jsx)(D.a,{value:"fiveOhOne",children:"501"})]})}),Object(c.jsx)("div",{children:Object(c.jsx)(O,{onClick:function(){return p("/lobby")},children:"Play"})})]})},E=function(){var e=Object(r.useState)(""),n=Object(y.a)(e,2),t=n[0],a=n[1],i=Object(r.useState)(""),o=Object(y.a)(i,2),u=o[0],l=o[1],j=Object(s.f)();return Object(c.jsxs)(g,{children:[Object(c.jsx)("div",{children:Object(c.jsx)("h1",{children:"Dartscore"})}),Object(c.jsx)("div",{children:Object(c.jsx)("label",{children:"Game Code"})}),Object(c.jsx)("div",{children:Object(c.jsx)(w,{placeholder:"Enter 4-Letter Code",onChange:function(e){return a(e.target.value.toUpperCase())}})}),Object(c.jsx)("div",{children:Object(c.jsx)("label",{children:"Name"})}),Object(c.jsx)("div",{children:Object(c.jsx)(w,{placeholder:"Enter Your Name",onChange:function(e){return l(e.target.value.toUpperCase())}})}),Object(c.jsx)("div",{children:Object(c.jsx)(O,{onClick:function(){return e="/lobby",void j.push({pathname:e,state:{gameID:t,player:u}});var e},children:"Play"})})]})},B=function(){var e=Object(s.g)().state,n=e.gameID,t=e.player,a=Object(r.useState)(""),i=Object(y.a)(a,2),o=i[0],u=i[1],l="cricket"===o?"Cricket":" 501",j=Object(r.useState)(""),d=Object(y.a)(j,2),b=d[0],f=d[1],h=Object(r.useState)(""),p=Object(y.a)(h,2),x=p[0],m=p[1],v=Object(r.useState)(!1),S=Object(y.a)(v,2),k=S[0],w=S[1],C=k&&t===b,N=Object(s.f)(),P=Object(r.useRef)(),J="wss://cvc7ipmik7.execute-api.us-east-1.amazonaws.com/dev/?game=".concat(n,"&player=").concat(t),_={game_id:n,msg:"I have connected"};Object(r.useEffect)((function(){P.current||(P.current=new WebSocket(J),P.current.onopen=function(){var e;console.log("ws opened"),null===(e=P.current)||void 0===e||e.send(JSON.stringify(_))},P.current.onmessage=function(){k||function(e){var n="".concat(T,"/lobby?game=").concat(e);return I.a.get(n).then((function(e){return e.data})).catch((function(e){return Promise.reject(JSON.stringify(e))}))}(n).then((function(e){var n=e.players,t=e.game_type;u(t),b||(f(n[0].player),console.log(b)),2!==n.length||x||m(n[1].player)}))},P.current.onclose=function(){return console.log("ws closed")})})),Object(r.useEffect)((function(){b&&x&&w(!0)}),[b,x]),Object(r.useEffect)((function(){k&&(P.current.onmessage=function(e){console.log(e),e.data.includes("start")&&D("/game")})}));var D=function(e){N.push({pathname:e,state:{gameID:n,gameType:o,player:t,player1:b,player2:x,connURL:J}})},z={game_id:n,msg:"start"},E=[b,x],B=function(){(function(e,n,t){var c="".concat(T,"/initialize");return I.a.post(c,{game_id:e,players:n,game_type:t}).then((function(e){return e.data})).catch((function(e){return Promise.reject(JSON.stringify(e))}))})(n,E,o).then((function(){var e;null===(e=P.current)||void 0===e||e.send(JSON.stringify(z))}))},G=function(){return Object(c.jsx)("div",{children:Object(c.jsx)(O,{onClick:function(){B()},children:"Play"})})};return Object(c.jsxs)(g,{children:[Object(c.jsxs)("div",{children:[Object(c.jsxs)("h1",{children:["Dartscore Lobby: ",n]}),Object(c.jsx)("h1",{children:l})]}),Object(c.jsxs)("div",{children:[Object(c.jsx)("h3",{children:b}),Object(c.jsx)("h3",{children:x})]}),C?Object(c.jsx)(G,{}):null]})},G=t(17);var R,L=t(30);function U(e){return function(n){e({type:R.updateGameState,gameState:n})}}function M(){var e=Object(l.a)(["\n    padding: 10px;\n    border-left: 3px solid white;\n    border-right: 3px solid white;\n"]);return M=function(){return e},e}function F(){var e=Object(l.a)(["\n    height: 70px;\n"]);return F=function(){return e},e}function V(){var e=Object(l.a)(["\n    padding: 10px;\n    border-top: 3px solid white;\n"]);return V=function(){return e},e}function W(){var e=Object(l.a)(["\n    padding: 10px;\n    border-bottom: 3px solid white;\n"]);return W=function(){return e},e}function H(){var e=Object(l.a)(["\n    border-collapse: collapse;\n    width: 100%;\n"]);return H=function(){return e},e}!function(e){e.updateTargetValueByPlayerId="updateTargetValueByPlayerId",e.updateGameState="updateGameState"}(R||(R={}));var Y=j.a.table(H()),q=j.a.th(W()),A=j.a.th(V()),K=j.a.tr(F()),Q=j.a.td(M()),X=function(e){var n,t,a=e.gameID,i=e.player,o=e.player1,u=e.player2,s=e.connURL,l=Object(r.useState)(!1),j=Object(y.a)(l,2),d=(j[0],j[1]),b=i===o?u:o,f=(n={},Object(G.a)(n,o,{15:0,16:0,17:0,18:0,19:0,20:0,Total:0,Bull:0}),Object(G.a)(n,u,{15:0,16:0,17:0,18:0,19:0,20:0,Total:0,Bull:0}),t=n,Object(r.useReducer)((function(e,n){switch(n.type){case R.updateTargetValueByPlayerId:var t=e[n.playerId],c=Object(L.a)(Object(L.a)({},e[n.playerId]),{},Object(G.a)({},n.segment,t[n.segment]++));return Object(L.a)(Object(L.a)({},e),{},Object(G.a)({},n.playerId,c));case R.updateGameState:return n.gameState;default:return e}}),t)),O=Object(y.a)(f,2),h=O[0],p=O[1],x=Object(r.useRef)();Object(r.useEffect)((function(){x.current||(x.current=new WebSocket(s),x.current.onopen=function(){console.log("ws opened"),J(a).then((function(e){var n=e.game_state;d(!1),U(p)(n)}))},x.current.onmessage=function(e){console.log(e.data),console.log(!e.data.includes(i)),J(a).then((function(e){var n=e.game_state;d(!1),U(p)(n)}))},x.current.onclose=function(){return console.log("ws closed")})}));var g=function(e){var n=function(e,n,t,c){var r=JSON.parse(JSON.stringify(c));if(r[n][e]++,r[n][e]>3&&r[t][e]<3){var a="Bull"===e?25:parseInt(e);r[n].Total+=a}return r}(e,i,b,h),t={game_id:a,msg:i};console.log("new game state"),console.log(n),P(a,n).then((function(){x.current.send(JSON.stringify(t))}))},m=function(e){return 0===e?"":1===e?"/":2===e?"x":e>=3?" \u24e7 ":void 0};return Object(c.jsx)(Y,{children:Object(c.jsxs)("tbody",{children:[Object(c.jsxs)(K,{children:[Object(c.jsx)(q,{children:o}),Object(c.jsx)(q,{children:"VS"}),Object(c.jsx)(q,{children:u})]}),["20","19","18","17","16","15","Bull"].map((function(e){return function(e){return Object(c.jsxs)(K,{children:[Object(c.jsx)("td",{children:m(h[o][e])}),Object(c.jsx)(Q,{children:Object(c.jsx)("button",{onClick:function(){g(e),d(!0)},children:e})}),Object(c.jsx)("td",{children:m(h[u][e])})]})}(e)})),Object(c.jsxs)(K,{children:[Object(c.jsx)(A,{children:h[o].Total}),Object(c.jsx)(A,{}),Object(c.jsx)(A,{children:h[u].Total})]})]})})},Z=t(105),$=t(109),ee=t(108),ne=t(106),te=t(107);function ce(){var e=Object(l.a)(["\n    text-align: left;\n"]);return ce=function(){return e},e}function re(){var e=Object(l.a)(["\n    // pull cricket row out into a separate component\n    height: 300px;\n"]);return re=function(){return e},e}function ae(){var e=Object(l.a)(["\n    // pull cricket row out into a separate component\n    height: 20px;\n"]);return ae=function(){return e},e}function ie(){var e=Object(l.a)(["\n    padding: 10px;\n    border-bottom: 3px solid white;\n"]);return ie=function(){return e},e}function oe(){var e=Object(l.a)(["\n    border-collapse: collapse;\n    width: 100%;\n"]);return oe=function(){return e},e}function ue(){var e=Object(l.a)(["\n    padding: 40px;\n    font-size: calc(150px + 2vmin);\n"]);return ue=function(){return e},e}function se(){var e=Object(l.a)(["\n    display: flex;\n    flex-direction: column;\n    padding: 10px;\n"]);return se=function(){return e},e}function le(){var e=Object(l.a)(["\n    height: 25px;\n    width: 25px;\n    background-color: green;\n    border-radius: 50%;\n    display: inline-block;\n"]);return le=function(){return e},e}function je(){var e=Object(l.a)(["\n    //add legs\n    text-align: center;\n    background-color: #282c34;\n    justify-content: center;\n    display: flex;\n    flex-direction: row;\n    min-height: 50vh;\n    align-items: center;\n    font-size: calc(10px + 2vmin);\n    //font-family: 'PressStart2P';\n    font-family: source-code-pro;\n    color: white;\n"]);return je=function(){return e},e}var de=j.a.section(je()),be=(j.a.span(le()),j.a.section(se())),fe=j.a.label(ue()),Oe=Object(j.a)(Z.a)(oe()),he=Object(j.a)(ne.a)(ie()),pe=Object(j.a)(te.a)(ae()),xe=Object(j.a)(ee.a)(re()),ge=(j.a.td(ce()),function(e){var n,t,a=e.gameID,i=e.player,o=e.player1,u=e.player2,s=e.connURL,l=Object(r.useState)(""),j=Object(y.a)(l,2),d=j[0],b=j[1],f=isNaN(Number(d))?0:Number(d),O=Object(r.useState)(!1),h=Object(y.a)(O,2),p=(h[0],h[1]),x=(n={},Object(G.a)(n,o,{Total:0,Moves:[]}),Object(G.a)(n,u,{Total:0,Moves:[]}),t=n,Object(r.useReducer)((function(e,n){switch(n.type){case R.updateGameState:return n.gameState;default:return e}}),t)),g=Object(y.a)(x,2),m=g[0],v=g[1],S=Object(r.useRef)();Object(r.useEffect)((function(){S.current||(S.current=new WebSocket(s),S.current.onopen=function(){console.log("ws opened"),J(a).then((function(e){var n=e.game_state;p(!1),U(v)(n)}))},S.current.onmessage=function(e){console.log(e.data),console.log(!e.data.includes(i)),J(a).then((function(e){var n=e.game_state;p(!1),U(v)(n)}))},S.current.onclose=function(){return console.log("ws closed")})}));var k=function(){if(f){var e=function(e,n,t){var c=JSON.parse(JSON.stringify(t));if([163,166,169,172,173,175,176,178,179].includes(e)||e>180||e<0)return c;var r=c[n].Total-e;return r<0||(c[n].Total=r,c[n].Moves.push(e)),c}(f,i,m),n={game_id:a,msg:i};console.log("new game state"),console.log(e),document.getElementById("score").value="",P(a,e).then((function(){S.current.send(JSON.stringify(n))}))}else document.getElementById("score").value=""},w=function(e){for(var n=[],t=m[e].Moves,r=0;r<t.length;r++)n.push(Object(c.jsxs)(pe,{children:[Object(c.jsx)($.a,{children:3*(r+1)}),Object(c.jsx)($.a,{children:t[r]})]}));return n.reverse()},N=function(e){if(e===i)return Object(c.jsxs)("div",{children:[Object(c.jsx)(C,{placeholder:"Score",id:"score",onChange:function(e){return b(e.target.value.toUpperCase())}}),Object(c.jsx)("button",{onClick:k,children:"submit"})]})};return Object(c.jsxs)(de,{children:[Object(c.jsxs)(be,{children:[Object(c.jsx)(he,{children:"Scoreboard"}),Object(c.jsx)(xe,{children:Object(c.jsx)(Oe,{stickyHeader:!0,children:w(o)})})]}),Object(c.jsxs)(be,{children:[Object(c.jsx)(fe,{children:m[o].Total}),Object(c.jsxs)("div",{children:[Object(c.jsx)("label",{children:o}),N(o)]})]}),Object(c.jsxs)(be,{children:[Object(c.jsx)(fe,{children:m[u].Total}),Object(c.jsx)("label",{children:u}),N(u)]}),Object(c.jsxs)(be,{children:[Object(c.jsx)(he,{children:"Scoreboard"}),Object(c.jsx)(xe,{children:Object(c.jsx)(Oe,{stickyHeader:!0,children:w(u)})})]})]})}),me=function(){var e=Object(s.g)().state,n=e.gameID,t=e.gameType,r=e.player,a=e.player1,i=e.player2,o=e.connURL;return"cricket"===t?Object(c.jsxs)(m,{children:[Object(c.jsxs)("div",{children:[Object(c.jsx)("h2",{children:"Cricket"}),Object(c.jsxs)("h3",{children:["Game Code: ",n]})]}),Object(c.jsx)("div",{children:Object(c.jsx)(X,{gameID:n,connURL:o,player:r,player1:a,player2:i})})]}):"fiveOhOne"===t?Object(c.jsxs)(m,{children:[Object(c.jsxs)("div",{children:[Object(c.jsx)("h2",{children:"501"}),Object(c.jsxs)("h3",{children:["Game Code: ",n]})]}),Object(c.jsx)("div",{children:Object(c.jsx)(ge,{gameID:n,connURL:o,player:r,player1:a,player2:i})})]}):void 0},ve=(t(85),function(){return Object(c.jsx)(u.a,{basename:"/dartscore",children:Object(c.jsxs)(s.c,{children:[Object(c.jsx)(s.a,{path:"/",component:v,exact:!0}),Object(c.jsx)(s.a,{path:"/join",component:E,exact:!0}),Object(c.jsx)(s.a,{path:"/create",component:z,exact:!0}),Object(c.jsx)(s.a,{path:"/lobby",render:function(){return Object(c.jsx)(B,{})},exact:!0}),Object(c.jsx)(s.a,{path:"/game",component:me,exact:!0})]})})}),ye=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,112)).then((function(n){var t=n.getCLS,c=n.getFID,r=n.getFCP,a=n.getLCP,i=n.getTTFB;t(e),c(e),r(e),a(e),i(e)}))};t.p;o.a.render(Object(c.jsx)(a.a.StrictMode,{children:Object(c.jsx)(ve,{})}),document.getElementById("root")),ye()}},[[86,1,2]]]);
//# sourceMappingURL=main.e893464c.chunk.js.map