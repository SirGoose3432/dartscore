(this.webpackJsonpdartscore=this.webpackJsonpdartscore||[]).push([[0],{59:function(e,n,t){},82:function(e,n,t){},83:function(e,n,t){"use strict";t.r(n);var c=t(1),r=t(0),a=t.n(r),o=t(22),i=t.n(o),s=(t(59),t(19)),u=t(6),l=t(4),j=t(5);function d(){var e=Object(l.a)(["\n    color: #30e06b;\n    font-size: 1em;\n    margin: 1em;\n    padding: 0.25em 1em;\n    border: 2px solid #30e06b;\n    border-radius: 3px;\n"]);return d=function(){return e},e}function b(){var e=Object(l.a)(["\n    color: #4fa1ee;\n    font-size: 1em;\n    margin: 1em;\n    padding: 0.25em 1em;\n    border: 2px solid#4fa1ee;\n    border-radius: 3px;\n"]);return b=function(){return e},e}var f=j.a.button(b()),h=j.a.button(d());function O(){var e=Object(l.a)(["\n    text-align: center;\n    background-color: #aac4f7;\n    min-height: 100vh;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    font-size: calc(10px + 2vmin);\n    color: #030303;\n"]);return O=function(){return e},e}function p(){var e=Object(l.a)(["\n    text-align: center;\n    background-color: #282c34;\n    min-height: 100vh;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    font-size: calc(10px + 2vmin);\n    //font-family: 'PressStart2P';\n    font-family: source-code-pro;\n    color: white;\n"]);return p=function(){return e},e}function x(){var e=Object(l.a)(["\n    text-align: center;\n    background-color: #282c34;\n    min-height: 100vh;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    font-size: calc(10px + 2vmin);\n    color: white;\n"]);return x=function(){return e},e}var g=j.a.section(x()),m=j.a.section(p()),v=(j.a.section(O()),function(){var e=Object(u.f)(),n=function(n){e.push(n)};return Object(c.jsxs)(g,{children:[Object(c.jsx)("div",{children:Object(c.jsx)("h1",{children:"Dartscore"})}),Object(c.jsx)("div",{children:Object(c.jsx)(f,{onClick:function(){return n("/create")},children:"Create Game"})}),Object(c.jsx)("div",{children:Object(c.jsx)(h,{onClick:function(){return n("/join")},children:"Join Game"})})]})}),y=t(8);function S(){var e=Object(l.a)(["\n    font-size: 18px;\n    padding: 10px;\n    margin: 10px;\n    background: #b6b6b6;\n    border: none;\n    border-radius: 3px;\n    ::placeholder {\n        color: #666666;\n    }\n    text-transform: uppercase;\n"]);return S=function(){return e},e}function w(){var e=Object(l.a)(["\n    font-size: 18px;\n    padding: 10px;\n    margin: 10px;\n    background: #b6b6b6;\n    border: none;\n    border-radius: 3px;\n    ::placeholder {\n        color: #666666;\n    }\n    text-transform: uppercase;\n"]);return w=function(){return e},e}var k=j.a.input(w()),C=j.a.input(S()),N=t(18),I=t.n(N);I.a.defaults.headers.get["Content-Type"]="application/json";var T="https://iukxdiz252.execute-api.us-east-1.amazonaws.com/dev",P=function(e,n){var t="".concat(T,"/update");return I.a.post(t,{game_id:e,game_state:n}).then((function(e){return e.data})).catch((function(e){return Promise.reject(JSON.stringify(e))}))},J=function(e){var n="".concat(T,"/gamestate?game=").concat(e);return I.a.get(n).then((function(e){return e.data})).catch((function(e){return Promise.reject(JSON.stringify(e))}))},D=t(99),_=t(98),z=function(){var e=Object(u.f)(),n=Object(r.useState)(""),t=Object(y.a)(n,2),a=t[0],o=t[1],i=Object(r.useState)(""),s=Object(y.a)(i,2),l=s[0],j=s[1],d=Object(r.useState)("cricket"),b=Object(y.a)(d,2),f=b[0],O=b[1];Object(r.useEffect)((function(){l||function(){var e="".concat(T,"/generateid");return I.a.get(e).then((function(e){return e.data})).catch((function(e){return Promise.reject(JSON.stringify(e))}))}().then((function(e){var n=e.game_id;l||(j(n),console.log(n))}))}),[l]);var p=function(n){(function(e){var n="".concat(T,"/create");return I.a.post(n,{game_id:e}).then((function(e){return e.data})).catch((function(e){return Promise.reject(JSON.stringify(e))}))})(l).then((function(){e.push({pathname:n,state:{gameID:l,player:a,gameType:f}})}))};return Object(c.jsxs)(g,{children:[Object(c.jsx)("div",{children:Object(c.jsx)("h1",{children:"Dartscore"})}),Object(c.jsx)("div",{children:Object(c.jsxs)("h2",{children:["Game Code: ",l]})}),Object(c.jsx)("div",{children:Object(c.jsx)("label",{children:"Name"})}),Object(c.jsx)("div",{children:Object(c.jsx)(k,{placeholder:"Enter Your Name",onChange:function(e){return o(e.target.value.toUpperCase())}})}),Object(c.jsx)("div",{children:Object(c.jsxs)(D.a,{value:f,onChange:function(e,n){O(n)},exclusive:!0,children:[Object(c.jsx)(_.a,{value:"cricket",children:"Cricket"}),Object(c.jsx)(_.a,{value:"fiveOhOne",children:"501"})]})}),Object(c.jsx)("div",{children:Object(c.jsx)(h,{onClick:function(){return p("/lobby")},children:"Play"})})]})},E=function(){var e=Object(r.useState)(""),n=Object(y.a)(e,2),t=n[0],a=n[1],o=Object(r.useState)(""),i=Object(y.a)(o,2),s=i[0],l=i[1],j=Object(u.f)();return Object(c.jsxs)(g,{children:[Object(c.jsx)("div",{children:Object(c.jsx)("h1",{children:"Dartscore"})}),Object(c.jsx)("div",{children:Object(c.jsx)("label",{children:"Game Code"})}),Object(c.jsx)("div",{children:Object(c.jsx)(k,{placeholder:"Enter 4-Letter Code",onChange:function(e){return a(e.target.value.toUpperCase())}})}),Object(c.jsx)("div",{children:Object(c.jsx)("label",{children:"Name"})}),Object(c.jsx)("div",{children:Object(c.jsx)(k,{placeholder:"Enter Your Name",onChange:function(e){return l(e.target.value.toUpperCase())}})}),Object(c.jsx)("div",{children:Object(c.jsx)(h,{onClick:function(){return e="/lobby",void j.push({pathname:e,state:{gameID:t,player:s}});var e},children:"Play"})})]})},B=function(){var e=Object(u.g)().state,n=e.gameID,t=e.player,a=e.gameType,o="cricket"===a?"Cricket":" 501",i=Object(r.useState)(""),s=Object(y.a)(i,2),l=s[0],j=s[1],d=Object(r.useState)(""),b=Object(y.a)(d,2),f=b[0],O=b[1],p=Object(r.useState)(!1),x=Object(y.a)(p,2),m=x[0],v=x[1],S=m&&t===l,w=Object(u.f)(),k=Object(r.useRef)(),C="wss://cvc7ipmik7.execute-api.us-east-1.amazonaws.com/dev/?game=".concat(n,"&player=").concat(t),N={game_id:n,msg:"I have connected"};Object(r.useEffect)((function(){k.current||(k.current=new WebSocket(C),k.current.onopen=function(){var e;console.log("ws opened"),null===(e=k.current)||void 0===e||e.send(JSON.stringify(N))},k.current.onmessage=function(){m||function(e){var n="".concat(T,"/lobby?game=").concat(e);return I.a.get(n).then((function(e){return e.data})).catch((function(e){return Promise.reject(JSON.stringify(e))}))}(n).then((function(e){var n=e.players;l||(j(n[0].player),console.log(l)),2!==n.length||f||O(n[1].player)}))},k.current.onclose=function(){return console.log("ws closed")})})),Object(r.useEffect)((function(){l&&f&&v(!0)}),[l,f]),Object(r.useEffect)((function(){m&&(k.current.onmessage=function(e){console.log(e),e.data.includes("start")&&P("/game")})}));var P=function(e){w.push({pathname:e,state:{gameID:n,gameType:a,player:t,player1:l,player2:f,connURL:C}})},J={game_id:n,msg:"start"},D=[l,f],_=function(){(function(e,n,t){var c="".concat(T,"/initialize");return I.a.post(c,{game_id:e,players:n,game_type:t}).then((function(e){return e.data})).catch((function(e){return Promise.reject(JSON.stringify(e))}))})(n,D,a).then((function(){var e;null===(e=k.current)||void 0===e||e.send(JSON.stringify(J))}))},z=function(){return Object(c.jsx)("div",{children:Object(c.jsx)(h,{onClick:function(){_()},children:"Play"})})};return Object(c.jsxs)(g,{children:[Object(c.jsxs)("div",{children:[Object(c.jsxs)("h1",{children:["Dartscore Lobby: ",n]}),Object(c.jsx)("h1",{children:o})]}),Object(c.jsxs)("div",{children:[Object(c.jsx)("h3",{children:l}),Object(c.jsx)("h3",{children:f})]}),S?Object(c.jsx)(z,{}):null]})},G=t(16);var R,L=t(27);function U(e){return function(n){e({type:R.updateGameState,gameState:n})}}function M(){var e=Object(l.a)(["\n    padding: 10px;\n    border-left: 3px solid white;\n    border-right: 3px solid white;\n"]);return M=function(){return e},e}function F(){var e=Object(l.a)(["\n    height: 70px;\n"]);return F=function(){return e},e}function V(){var e=Object(l.a)(["\n    padding: 10px;\n    border-top: 3px solid white;\n"]);return V=function(){return e},e}function W(){var e=Object(l.a)(["\n    padding: 10px;\n    border-bottom: 3px solid white;\n"]);return W=function(){return e},e}function Y(){var e=Object(l.a)(["\n    border-collapse: collapse;\n    width: 100%;\n"]);return Y=function(){return e},e}!function(e){e.updateTargetValueByPlayerId="updateTargetValueByPlayerId",e.updateGameState="updateGameState"}(R||(R={}));var q=j.a.table(Y()),A=j.a.th(W()),H=j.a.th(V()),K=j.a.tr(F()),Q=j.a.td(M()),X=function(e){var n,t,a=e.gameID,o=e.player,i=e.player1,s=e.player2,u=e.connURL,l=Object(r.useState)(!1),j=Object(y.a)(l,2),d=(j[0],j[1]),b=o===i?s:i,f=(n={},Object(G.a)(n,i,{15:0,16:0,17:0,18:0,19:0,20:0,Total:0,Bull:0}),Object(G.a)(n,s,{15:0,16:0,17:0,18:0,19:0,20:0,Total:0,Bull:0}),t=n,Object(r.useReducer)((function(e,n){switch(n.type){case R.updateTargetValueByPlayerId:var t=e[n.playerId],c=Object(L.a)(Object(L.a)({},e[n.playerId]),{},Object(G.a)({},n.segment,t[n.segment]++));return Object(L.a)(Object(L.a)({},e),{},Object(G.a)({},n.playerId,c));case R.updateGameState:return n.gameState;default:return e}}),t)),h=Object(y.a)(f,2),O=h[0],p=h[1],x=Object(r.useRef)();Object(r.useEffect)((function(){x.current||(x.current=new WebSocket(u),x.current.onopen=function(){console.log("ws opened"),J(a).then((function(e){var n=e.game_state;d(!1),U(p)(n)}))},x.current.onmessage=function(e){console.log(e.data),console.log(!e.data.includes(o)),J(a).then((function(e){var n=e.game_state;d(!1),U(p)(n)}))},x.current.onclose=function(){return console.log("ws closed")})}));var g=function(e){var n=function(e,n,t,c){var r=JSON.parse(JSON.stringify(c));if(r[n][e]++,r[n][e]>3&&r[t][e]<3){var a="Bull"===e?25:parseInt(e);r[n].Total+=a}return r}(e,o,b,O),t={game_id:a,msg:o};console.log("new game state"),console.log(n),P(a,n).then((function(){x.current.send(JSON.stringify(t))}))},m=function(e){return 0===e?"":1===e?"/":2===e?"x":e>=3?" \u24e7 ":void 0};return Object(c.jsx)(q,{children:Object(c.jsxs)("tbody",{children:[Object(c.jsxs)(K,{children:[Object(c.jsx)(A,{children:i}),Object(c.jsx)(A,{children:"VS"}),Object(c.jsx)(A,{children:s})]}),["20","19","18","17","16","15","Bull"].map((function(e){return function(e){return Object(c.jsxs)(K,{children:[Object(c.jsx)("td",{children:m(O[i][e])}),Object(c.jsx)(Q,{children:Object(c.jsx)("button",{onClick:function(){g(e),d(!0)},children:e})}),Object(c.jsx)("td",{children:m(O[s][e])})]})}(e)})),Object(c.jsxs)(K,{children:[Object(c.jsx)(H,{children:O[i].Total}),Object(c.jsx)(H,{}),Object(c.jsx)(H,{children:O[s].Total})]})]})})};function Z(){var e=Object(l.a)(["\n    text-align: left;\n"]);return Z=function(){return e},e}function $(){var e=Object(l.a)(["\n    // pull cricket row out into a separate component\n    height: 20px;\n"]);return $=function(){return e},e}function ee(){var e=Object(l.a)(["\n    padding: 10px;\n    border-bottom: 3px solid white;\n"]);return ee=function(){return e},e}function ne(){var e=Object(l.a)(["\n    border-collapse: collapse;\n    width: 100%;\n"]);return ne=function(){return e},e}function te(){var e=Object(l.a)(["\n    padding: 40px;\n    font-size: calc(150px + 2vmin);\n"]);return te=function(){return e},e}function ce(){var e=Object(l.a)(["\n    display: flex;\n    flex-direction: column;\n    padding: 10px;\n"]);return ce=function(){return e},e}function re(){var e=Object(l.a)(["\n    height: 25px;\n    width: 25px;\n    background-color: green;\n    border-radius: 50%;\n    display: inline-block;\n"]);return re=function(){return e},e}function ae(){var e=Object(l.a)(["\n    //add legs\n    text-align: center;\n    background-color: #282c34;\n    justify-content: center;\n    display: flex;\n    flex-direction: row;\n    min-height: 50vh;\n    align-items: center;\n    font-size: calc(10px + 2vmin);\n    //font-family: 'PressStart2P';\n    font-family: source-code-pro;\n    color: white;\n"]);return ae=function(){return e},e}var oe=j.a.section(ae()),ie=(j.a.span(re()),j.a.section(ce())),se=j.a.label(te()),ue=j.a.table(ne()),le=j.a.th(ee()),je=j.a.tr($()),de=(j.a.td(Z()),function(e){var n,t,a=e.gameID,o=e.player,i=e.player1,s=e.player2,u=e.connURL,l=Object(r.useState)(""),j=Object(y.a)(l,2),d=j[0],b=j[1],f=isNaN(Number(d))?0:Number(d),h=Object(r.useState)(!1),O=Object(y.a)(h,2),p=(O[0],O[1]),x=(n={},Object(G.a)(n,i,{Total:0,Moves:[]}),Object(G.a)(n,s,{Total:0,Moves:[]}),t=n,Object(r.useReducer)((function(e,n){switch(n.type){case R.updateGameState:return n.gameState;default:return e}}),t)),g=Object(y.a)(x,2),m=g[0],v=g[1],S=Object(r.useRef)();Object(r.useEffect)((function(){S.current||(S.current=new WebSocket(u),S.current.onopen=function(){console.log("ws opened"),J(a).then((function(e){var n=e.game_state;p(!1),U(v)(n)}))},S.current.onmessage=function(e){console.log(e.data),console.log(!e.data.includes(o)),J(a).then((function(e){var n=e.game_state;p(!1),U(v)(n)}))},S.current.onclose=function(){return console.log("ws closed")})}));var w=function(){if(f){var e=function(e,n,t){var c=JSON.parse(JSON.stringify(t)),r=c[n].Total-e;return r<0&&(r=0),c[n].Total=r,c[n].Moves.push(e),c}(f,o,m),n={game_id:a,msg:o};console.log("new game state"),console.log(e),document.getElementById("score").value="",P(a,e).then((function(){S.current.send(JSON.stringify(n))}))}else document.getElementById("score").value=""},k=function(e){for(var n=[],t=m[e].Moves,r=0;r<t.length;r++)n.push(Object(c.jsxs)(je,{children:[Object(c.jsx)("td",{children:3*(r+1)}),Object(c.jsx)("td",{children:t[r]})]}));return n},N=function(e){if(e===o)return Object(c.jsxs)("div",{children:[Object(c.jsx)(C,{placeholder:"Score",id:"score",onChange:function(e){return b(e.target.value.toUpperCase())}}),Object(c.jsx)("button",{onClick:w,children:"submit"})]})};return Object(c.jsxs)(oe,{children:[Object(c.jsx)(ie,{children:Object(c.jsxs)(ue,{children:[Object(c.jsx)(je,{children:Object(c.jsx)(le,{children:"Scoreboard"})}),k(i)]})}),Object(c.jsxs)(ie,{children:[Object(c.jsx)(se,{children:m[i].Total}),Object(c.jsxs)("div",{children:[Object(c.jsx)("label",{children:i}),N(i)]})]}),Object(c.jsxs)(ie,{children:[Object(c.jsx)(se,{children:m[s].Total}),Object(c.jsx)("label",{children:s}),N(s)]}),Object(c.jsx)(ie,{children:Object(c.jsxs)(ue,{children:[Object(c.jsx)(je,{children:Object(c.jsx)(le,{children:"Scoreboard"})}),k(s)]})})]})}),be=function(){var e=Object(u.g)().state,n=e.gameID,t=e.gameType,r=e.player,a=e.player1,o=e.player2,i=e.connURL;return"cricket"===t?Object(c.jsxs)(m,{children:[Object(c.jsxs)("div",{children:[Object(c.jsx)("h2",{children:"Cricket"}),Object(c.jsxs)("h3",{children:["Game Code: ",n]})]}),Object(c.jsx)("div",{children:Object(c.jsx)(X,{gameID:n,connURL:i,player:r,player1:a,player2:o})})]}):Object(c.jsxs)(m,{children:[Object(c.jsxs)("div",{children:[Object(c.jsx)("h2",{children:"501"}),Object(c.jsxs)("h3",{children:["Game Code: ",n]})]}),Object(c.jsx)("div",{children:Object(c.jsx)(de,{gameID:n,connURL:i,player:r,player1:a,player2:o})})]})},fe=(t(82),function(){return Object(c.jsx)(s.a,{basename:"/dartscore",children:Object(c.jsxs)(u.c,{children:[Object(c.jsx)(u.a,{path:"/",component:v,exact:!0}),Object(c.jsx)(u.a,{path:"/join",component:E,exact:!0}),Object(c.jsx)(u.a,{path:"/create",component:z,exact:!0}),Object(c.jsx)(u.a,{path:"/lobby",render:function(){return Object(c.jsx)(B,{})},exact:!0}),Object(c.jsx)(u.a,{path:"/game",component:be,exact:!0})]})})}),he=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,100)).then((function(n){var t=n.getCLS,c=n.getFID,r=n.getFCP,a=n.getLCP,o=n.getTTFB;t(e),c(e),r(e),a(e),o(e)}))};t.p;i.a.render(Object(c.jsx)(a.a.StrictMode,{children:Object(c.jsx)(fe,{})}),document.getElementById("root")),he()}},[[83,1,2]]]);
//# sourceMappingURL=main.d4d561af.chunk.js.map