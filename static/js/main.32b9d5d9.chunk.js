(this.webpackJsonpdartscore=this.webpackJsonpdartscore||[]).push([[0],{42:function(e,n,t){},65:function(e,n,t){},66:function(e,n,t){"use strict";t.r(n);var c=t(1),r=t(0),a=t.n(r),o=t(33),i=t.n(o),u=(t(42),t(13)),s=t(2),l=t(4),j=t(5);function d(){var e=Object(l.a)(["\n    color: #30e06b;\n    font-size: 1em;\n    margin: 1em;\n    padding: 0.25em 1em;\n    border: 2px solid #30e06b;\n    border-radius: 3px;\n"]);return d=function(){return e},e}function b(){var e=Object(l.a)(["\n    color: #4fa1ee;\n    font-size: 1em;\n    margin: 1em;\n    padding: 0.25em 1em;\n    border: 2px solid#4fa1ee;\n    border-radius: 3px;\n"]);return b=function(){return e},e}var f=j.a.button(b()),h=j.a.button(d());function O(){var e=Object(l.a)(["\n    text-align: center;\n    background-color: #aac4f7;\n    min-height: 100vh;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    font-size: calc(10px + 2vmin);\n    color: #030303;\n"]);return O=function(){return e},e}function p(){var e=Object(l.a)(["\n    text-align: center;\n    background-color: #282c34;\n    min-height: 100vh;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    font-size: calc(10px + 2vmin);\n    //font-family: 'PressStart2P';\n    font-family: source-code-pro;\n    color: white;\n"]);return p=function(){return e},e}function g(){var e=Object(l.a)(["\n    text-align: center;\n    background-color: #282c34;\n    min-height: 100vh;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    font-size: calc(10px + 2vmin);\n    color: white;\n"]);return g=function(){return e},e}var x=j.a.section(g()),m=j.a.section(p()),v=(j.a.section(O()),function(){var e=Object(s.f)(),n=function(n){e.push(n)};return Object(c.jsxs)(x,{children:[Object(c.jsx)("div",{children:Object(c.jsx)("h1",{children:"Dartscore"})}),Object(c.jsx)("div",{children:Object(c.jsx)(f,{onClick:function(){return n("/create")},children:"Create Game"})}),Object(c.jsx)("div",{children:Object(c.jsx)(h,{onClick:function(){return n("/join")},children:"Join Game"})})]})}),y=t(7);function S(){var e=Object(l.a)(["\n    font-size: 18px;\n    padding: 10px;\n    margin: 10px;\n    background: #b6b6b6;\n    border: none;\n    border-radius: 3px;\n    ::placeholder {\n        color: #666666;\n    }\n"]);return S=function(){return e},e}var w=j.a.input(S()),C=t(12),k=t.n(C);k.a.defaults.headers.get["Content-Type"]="application/json";var I,P="https://iukxdiz252.execute-api.us-east-1.amazonaws.com/dev",D=function(e){var n="".concat(P,"/gamestate?game=").concat(e);return k.a.get(n).then((function(e){return e.data})).catch((function(e){return Promise.reject(JSON.stringify(e))}))},N=function(){var e=Object(s.f)(),n=Object(r.useState)(""),t=Object(y.a)(n,2),a=t[0],o=t[1],i=Object(r.useState)(""),u=Object(y.a)(i,2),l=u[0],j=u[1];Object(r.useEffect)((function(){l||function(){var e="".concat(P,"/generateid");return k.a.get(e).then((function(e){return e.data})).catch((function(e){return Promise.reject(JSON.stringify(e))}))}().then((function(e){var n=e.game_id;l||(j(n),console.log(n))}))}),[l]);var d=function(n){(function(e){var n="".concat(P,"/create");return k.a.post(n,{game_id:e}).then((function(e){return e.data})).catch((function(e){return Promise.reject(JSON.stringify(e))}))})(l).then((function(){e.push({pathname:n,state:{gameID:l,player:a}})}))};return Object(c.jsxs)(x,{children:[Object(c.jsx)("div",{children:Object(c.jsx)("h1",{children:"Dartscore"})}),Object(c.jsx)("div",{children:Object(c.jsxs)("h2",{children:["Game Code: ",l]})}),Object(c.jsx)("div",{children:Object(c.jsx)("label",{children:"Name"})}),Object(c.jsx)("div",{children:Object(c.jsx)(w,{placeholder:"Enter Your Name",onChange:function(e){return o(e.target.value)}})}),Object(c.jsx)("div",{children:Object(c.jsx)(h,{onClick:function(){return d("/lobby")},children:"Play"})})]})},J=function(){var e=Object(r.useState)(""),n=Object(y.a)(e,2),t=n[0],a=n[1],o=Object(r.useState)(""),i=Object(y.a)(o,2),u=i[0],l=i[1],j=Object(s.f)();return Object(c.jsxs)(x,{children:[Object(c.jsx)("div",{children:Object(c.jsx)("h1",{children:"Dartscore"})}),Object(c.jsx)("div",{children:Object(c.jsx)("label",{children:"Game Code"})}),Object(c.jsx)("div",{children:Object(c.jsx)(w,{placeholder:"Enter 4-Letter Code",onChange:function(e){return a(e.target.value)}})}),Object(c.jsx)("div",{children:Object(c.jsx)("label",{children:"Name"})}),Object(c.jsx)("div",{children:Object(c.jsx)(w,{placeholder:"Enter Your Name",onChange:function(e){return l(e.target.value)}})}),Object(c.jsx)("div",{children:Object(c.jsx)(h,{onClick:function(){return e="/lobby",void j.push({pathname:e,state:{gameID:t,player:u}});var e},children:"Play"})})]})},T=function(){var e=Object(s.g)().state,n=e.gameID,t=e.player,a=Object(r.useState)(""),o=Object(y.a)(a,2),i=o[0],u=o[1],l=Object(r.useState)(""),j=Object(y.a)(l,2),d=j[0],b=j[1],f=Object(r.useState)(!1),O=Object(y.a)(f,2),p=O[0],g=O[1],m=p&&t===i,v=Object(s.f)(),S=Object(r.useRef)(),w="wss://cvc7ipmik7.execute-api.us-east-1.amazonaws.com/dev/?game=".concat(n,"&player=").concat(t),C={game_id:n,msg:"I have connected"};Object(r.useEffect)((function(){S.current||(S.current=new WebSocket(w),S.current.onopen=function(){var e;console.log("ws opened"),null===(e=S.current)||void 0===e||e.send(JSON.stringify(C))},S.current.onmessage=function(){p||function(e){var n="".concat(P,"/lobby?game=").concat(e);return k.a.get(n).then((function(e){return e.data})).catch((function(e){return Promise.reject(JSON.stringify(e))}))}(n).then((function(e){var n=e.players;i||(u(n[0].player),console.log(i)),2!==n.length||d||b(n[1].player)}))},S.current.onclose=function(){return console.log("ws closed")})})),Object(r.useEffect)((function(){i&&d&&g(!0)}),[i,d]),Object(r.useEffect)((function(){p&&(S.current.onmessage=function(e){console.log(e),e.data.includes("start")&&I("/game")})}));var I=function(e){v.push({pathname:e,state:{gameID:n,player:t,player1:i,player2:d,connURL:w}})},D={game_id:n,msg:"start"},N=[i,d],J=function(){(function(e,n,t){var c="".concat(P,"/initialize");return k.a.post(c,{game_id:e,players:n,game_type:t}).then((function(e){return e.data})).catch((function(e){return Promise.reject(JSON.stringify(e))}))})(n,N,"cricket").then((function(){var e;null===(e=S.current)||void 0===e||e.send(JSON.stringify(D))}))},T=function(){return Object(c.jsx)("div",{children:Object(c.jsx)(h,{onClick:function(){J()},children:"Play"})})};return Object(c.jsxs)(x,{children:[Object(c.jsx)("div",{children:Object(c.jsxs)("h1",{children:["Dartscore Lobby: ",n]})}),Object(c.jsx)("div",{children:Object(c.jsx)("h2",{children:i})}),Object(c.jsx)("div",{children:Object(c.jsx)("h2",{children:d})}),m?Object(c.jsx)(T,{}):null]})},_=t(11),z=t(18);function E(e){return function(n){e({type:I.updateGameState,gameState:n})}}function B(){var e=Object(l.a)(["\n    padding: 10px;\n    border-left: 3px solid white;\n    border-right: 3px solid white;\n"]);return B=function(){return e},e}function G(){var e=Object(l.a)(["\n    height: 70px;\n"]);return G=function(){return e},e}function L(){var e=Object(l.a)(["\n    padding: 10px;\n    border-top: 3px solid white;\n"]);return L=function(){return e},e}function R(){var e=Object(l.a)(["\n    padding: 10px;\n    border-bottom: 3px solid white;\n"]);return R=function(){return e},e}function V(){var e=Object(l.a)(["\n    border-collapse: collapse;\n    width: 100%;\n"]);return V=function(){return e},e}!function(e){e.updateTargetValueByPlayerId="updateTargetValueByPlayerId",e.updateGameState="updateGameState"}(I||(I={}));var F=j.a.table(V()),U=j.a.th(R()),W=j.a.th(L()),Y=j.a.tr(G()),M=j.a.td(B()),q=function(e){var n,t,a=e.gameID,o=e.player,i=e.player1,u=e.player2,s=e.connURL,l=Object(r.useState)(!1),j=Object(y.a)(l,2),d=j[0],b=j[1],f=(n={},Object(_.a)(n,i,{15:0,16:0,17:0,18:0,19:0,20:0,Total:0,Bull:0}),Object(_.a)(n,u,{15:0,16:0,17:0,18:0,19:0,20:0,Total:0,Bull:0}),t=n,Object(r.useReducer)((function(e,n){switch(n.type){case I.updateTargetValueByPlayerId:var t=e[n.playerId],c=Object(z.a)(Object(z.a)({},e[n.playerId]),{},Object(_.a)({},n.segment,t[n.segment]++));return Object(z.a)(Object(z.a)({},e),{},Object(_.a)({},n.playerId,c));case I.updateGameState:return n.gameState;default:return e}}),t)),h=Object(y.a)(f,2),O=h[0],p=h[1],g=Object(r.useRef)();Object(r.useEffect)((function(){g.current||(g.current=new WebSocket(s),g.current.onopen=function(){console.log("ws opened"),D(a).then((function(e){var n=e.game_state;b(!1),E(p)(n)}))},g.current.onmessage=function(e){console.log(e.data),console.log(!e.data.includes(o)),D(a).then((function(e){var n=e.game_state;b(!1),E(p)(n)}))},g.current.onclose=function(){return console.log("ws closed")})})),Object(r.useEffect)((function(){if(d){console.log("in update");var e={game_id:a,msg:o};console.log(O),function(e,n){var t="".concat(P,"/update");return k.a.post(t,{game_id:e,game_state:n}).then((function(e){return e.data})).catch((function(e){return Promise.reject(JSON.stringify(e))}))}(a,O).then((function(){b(!1),console.log(d),g.current.send(JSON.stringify(e))}))}}),[O]);var x=function(e){return Object(c.jsxs)(Y,{children:[Object(c.jsx)("td",{children:O[i][e]}),Object(c.jsx)(M,{children:Object(c.jsx)("button",{onClick:function(){!function(e){console.log("Doing dart action"),p({type:I.updateTargetValueByPlayerId,playerId:o,segment:e}),console.log(O),b(!0),console.log(d)}(e)},children:e})}),Object(c.jsx)("td",{children:O[u][e]})]})};return Object(c.jsx)(F,{children:Object(c.jsxs)("tbody",{children:[Object(c.jsxs)(Y,{children:[Object(c.jsx)(U,{children:i}),Object(c.jsx)(U,{children:"VS"}),Object(c.jsx)(U,{children:u})]}),["20","19","18","17","16","15","Bull"].map((function(e){return x(e)})),Object(c.jsxs)(Y,{children:[Object(c.jsx)(W,{children:O[i].Total}),Object(c.jsx)(W,{}),Object(c.jsx)(W,{children:O[u].Total})]})]})})},A=function(){var e=Object(s.g)().state,n=e.gameID,t=e.player,r=e.player1,a=e.player2,o=e.connURL;return Object(c.jsxs)(m,{children:[Object(c.jsxs)("div",{children:[Object(c.jsx)("h2",{children:"Cricket"}),Object(c.jsxs)("h3",{children:["Game Code: ",n]})]}),Object(c.jsx)("div",{children:Object(c.jsx)(q,{gameID:n,connURL:o,player:t,player1:r,player2:a})})]})},H=(t(65),function(){return Object(c.jsx)(u.a,{basename:"/dartscore",children:Object(c.jsxs)(s.c,{children:[Object(c.jsx)(s.a,{path:"/",component:v,exact:!0}),Object(c.jsx)(s.a,{path:"/join",component:J,exact:!0}),Object(c.jsx)(s.a,{path:"/create",component:N,exact:!0}),Object(c.jsx)(s.a,{path:"/lobby",render:function(){return Object(c.jsx)(T,{})},exact:!0}),Object(c.jsx)(s.a,{path:"/game",component:A,exact:!0})]})})}),K=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,67)).then((function(n){var t=n.getCLS,c=n.getFID,r=n.getFCP,a=n.getLCP,o=n.getTTFB;t(e),c(e),r(e),a(e),o(e)}))};t.p;i.a.render(Object(c.jsx)(a.a.StrictMode,{children:Object(c.jsx)(H,{})}),document.getElementById("root")),K()}},[[66,1,2]]]);
//# sourceMappingURL=main.32b9d5d9.chunk.js.map